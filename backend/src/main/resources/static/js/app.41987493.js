(function(e){function t(t){for(var a,n,i=t[0],s=t[1],c=t[2],u=0,p=[];u<i.length;u++)n=i[u],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&p.push(l[n][0]),l[n]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var s=r[i];0!==l[s]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},l={app:0},o=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view")],1)},o=[],n=r("2877"),i={},s=Object(n["a"])(i,l,o,!1,null,null,null),c=s.exports,d=r("8c4f"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"homeBox"},[r("div",{staticClass:"searchBox"},[r("el-button",{staticStyle:{position:"absolute",right:"0"},attrs:{type:"primary"},on:{click:function(t){e.orderDrawer=!0}}},[e._v("新增")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"instanceTitle",label:"实例标题"}}),r("el-table-column",{attrs:{prop:"serialNum",label:"编号"}}),r("el-table-column",{attrs:{prop:"selectUser",label:"选择用户"}}),r("el-table-column",{attrs:{prop:"clientOrder",label:"客户订单号"}}),r("el-table-column",{attrs:{prop:"handInDate",label:"交货日期"}}),r("el-table-column",{attrs:{prop:"note",label:"备注"}}),r("el-table-column",{attrs:{prop:"clientSerialNum",label:"客户编号"}}),r("el-table-column",{attrs:{prop:"clientEntire",label:"客户全称"}}),r("el-table-column",{attrs:{prop:"clientName",label:"客户联系人"}}),r("el-table-column",{attrs:{prop:"clientPhone",label:"联系方式"}}),r("el-table-column",{attrs:{prop:"clientAddress",label:"地址"}}),r("el-table-column",{attrs:{prop:"prepaidOrder",label:"预付订单"}}),r("el-table-column",{attrs:{prop:"deposit",label:"订金（元）"}}),r("el-table-column",{attrs:{prop:"depositMoney",label:"订单金额（元）"}}),r("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),r("el-table-column",{attrs:{prop:"updataTime",label:"修改时间"}})],1),r("el-pagination",{staticStyle:{float:"right","margin-top":"30px"},attrs:{"current-page":e.parameter.pageNum,"page-sizes":[5,10,15,20],"page-size":e.parameter.pageSize,total:e.listTotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-drawer",{attrs:{title:"新增订单",visible:e.orderDrawer,direction:"rtl",size:"50%"},on:{"update:visible":function(t){e.orderDrawer=t}}},[r("el-form",{ref:"form",attrs:{model:e.orderForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"编号"}},[r("el-input",{model:{value:e.orderForm.serialNum,callback:function(t){e.$set(e.orderForm,"serialNum",t)},expression:"orderForm.serialNum"}})],1),r("el-form-item",{attrs:{label:"选择客户"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.orderForm.selectUser,callback:function(t){e.$set(e.orderForm,"selectUser",t)},expression:"orderForm.selectUser"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"客户订单号"}},[r("el-input",{model:{value:e.orderForm.clientOrder,callback:function(t){e.$set(e.orderForm,"clientOrder",t)},expression:"orderForm.clientOrder"}})],1),r("el-form-item",{attrs:{label:"交货日期"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.orderForm.handInDate,callback:function(t){e.$set(e.orderForm,"handInDate",t)},expression:"orderForm.handInDate"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{model:{value:e.orderForm.note,callback:function(t){e.$set(e.orderForm,"note",t)},expression:"orderForm.note"}})],1),r("el-form-item",{attrs:{label:"预付订单"}},[r("el-radio-group",{model:{value:e.orderForm.prepaidOrder,callback:function(t){e.$set(e.orderForm,"prepaidOrder",t)},expression:"orderForm.prepaidOrder"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"订金"}},[r("el-input",{attrs:{type:"number"},model:{value:e.orderForm.deposit,callback:function(t){e.$set(e.orderForm,"deposit",t)},expression:"orderForm.deposit"}})],1),r("el-form-item",{attrs:{label:"订金总额"}},[r("el-input",{attrs:{type:"number"},model:{value:e.orderForm.depositMoney,callback:function(t){e.$set(e.orderForm,"depositMoney",t)},expression:"orderForm.depositMoney"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"商品明细"}},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.goodList,border:"","max-height":"500"}},[r("el-table-column",{attrs:{type:"type",label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),r("el-table-column",{attrs:{prop:"aa",label:"选择商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请选择"},on:{focus:function(r){return e.openDialog(t.$index)}},model:{value:t.row.aa,callback:function(r){e.$set(t.row,"aa",r)},expression:"scope.row.aa"}})]}}])}),r("el-table-column",{attrs:{prop:"a",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"b",label:"商品分类"}}),r("el-table-column",{attrs:{prop:"c",label:"商品编号"}}),r("el-table-column",{attrs:{prop:"d",label:"规格"}}),r("el-table-column",{attrs:{prop:"e",label:"单位"}}),r("el-table-column",{attrs:{prop:"f",label:"单价/元"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数字",type:"number"},on:{input:function(r){return e.allMoney(t.$index,t.row)}},model:{value:t.row.f,callback:function(r){e.$set(t.row,"f",r)},expression:"scope.row.f"}})]}}])}),r("el-table-column",{attrs:{prop:"g",label:"*数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数字",type:"number"},on:{input:function(r){return e.allMoney(t.$index,t.row)}},model:{value:t.row.g,callback:function(r){e.$set(t.row,"g",r)},expression:"scope.row.g"}})]}}])}),r("el-table-column",{attrs:{prop:"h",label:"合计"}}),r("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.deleteData(t.$index)}}},[e._v("删除")])]}}])})],1),r("el-button",{staticStyle:{"margin-top":"15px"},on:{click:e.addGoodsData}},[r("i",{staticClass:"el-icon-plus"}),e._v("新增一项")])],1),r("el-form-item",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",width:"100%","margin-top":"30px"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addOrderClick}},[e._v("确认")]),r("el-button",{on:{click:function(t){e.orderDrawer=!1}}},[e._v("取消")])],1)],1)],1),r("el-dialog",{attrs:{title:"商品",visible:e.dialogTable,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogTable=t}}},[r("el-table",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:e.dialogGoodsData,stripe:"",border:""},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{prop:"a",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"b",label:"商品分类"}}),r("el-table-column",{attrs:{prop:"c",label:"商品编号"}}),r("el-table-column",{attrs:{prop:"d",label:"规格"}}),r("el-table-column",{attrs:{prop:"e",label:"单位"}}),r("el-table-column",{attrs:{prop:"f",label:"单价/元"}})],1)],1)],1)},p=[],m=(r("e9c4"),r("a434"),r("d3b7"),r("ac1f"),r("5319"),r("bc3a")),f=r.n(m),b=r("5c96"),h=r.n(b),g=void 0,v="",y=f.a.create({baseURL:v,timeout:5e3});y.interceptors.request.use((function(e){var t=localStorage.getItem("dindinToken");return t&&(e.headers.token=t),e}),(function(e){Promise.reject(e)})),y.interceptors.response.use((function(e){var t=e.data;if(200==t.code)return e;b["Message"].error("请求错误")}),(function(e){var t;console.log("【ERROR】",JSON.stringify(e));var r="timeout of 5000ms exceeded";e.message==r&&Object(b["Message"])({showClose:!0,message:"请求超时",type:"error"});var a="",l=JSON.parse(JSON.stringify(e));if(null!==(t=l.response)&&void 0!==t&&t.status)switch(e.response.status){case 400:a="请求错误(400)，请重新申请";break;case 401:return a="登录错误(401)，请重新登录",g.$router.replace("/login");case 403:a="拒绝访问(403)";break;case 404:a="请求出错(404)";break;case 408:a="请求超时(408)";break;case 500:a="服务器错误(500)，请重启软件或切换功能页！";break;case 501:a="服务未实现(501)";break;case 502:a="网络错误(502)";break;case 503:a="服务不可用(503)";break;case 504:a="网络超时(504)";break;case 505:a="HTTP版本不受支持(505)";break;case 702:return a="Session过期,请重新登录s",g.$router.replace("/login");default:a="网络连接出错"}else a="连接服务器失败,请退出重试!";return Object(b["Message"])({showClose:!0,message:a,type:"error"}),Promise.reject(e)}));var O=y,k=function(){return O({url:"/login/getCorpId",method:"get"})},w=function(e){return O({url:"/login/dingtalk/"+e.code,method:"get"})},S=function(e){return O({url:"/biz/getOrderList",method:"get",params:e})},x=function(e){return O({url:"/biz/getCustomerList",method:"get",params:e})},T=function(e){return O({url:"/biz/getCommodityList",method:"get",params:e})},D=function(e){return O({url:"/biz/saveSaleBillInfo",method:"post",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}})},F=r("2c18");function N(e,t){"notInDingTalk"!==F["env"].platform&&F["ready"]((function(){F["runtime"].permission.requestAuthCode({corpId:t,onSuccess:function(t){e(t.code)},onFail:function(e){alert("fail"),alert(JSON.stringify(e))}})}))}var I={props:{},components:{},data:function(){return{parameter:{pageNum:1,pageSize:10},listTotal:5,dataList:[{instanceTitle:"标题",serialNum:"001",selectUser:"选择用户",clientOrder:"20211218",handInDate:"2021-12-24",note:"请尽快发货",clientSerialNum:"C001",clientEntire:"路人甲的全称",clientName:"路人甲",clientPhone:"15896358753",clientAddress:"江苏省南京市",prepaidOrder:"20211218",deposit:"1000",depositMoney:"1000",createTime:"2021-12-18",updataTime:"2121-12-18"},{instanceTitle:"标题",serialNum:"001",selectUser:"选择用户",clientOrder:"20211218",handInDate:"2021-12-24",note:"请尽快发货",clientSerialNum:"C001",clientEntire:"路人甲的全称",clientName:"路人甲",clientPhone:"15896358753",clientAddress:"江苏省南京市",prepaidOrder:"20211218",deposit:"1000",depositMoney:"1000",createTime:"2021-12-18",updataTime:"2121-12-18"},{instanceTitle:"标题",serialNum:"001",selectUser:"选择用户",clientOrder:"20211218",handInDate:"2021-12-24",note:"请尽快发货",clientSerialNum:"C001",clientEntire:"路人甲的全称",clientName:"路人甲",clientPhone:"15896358753",clientAddress:"江苏省南京市",prepaidOrder:"20211218",deposit:"1000",depositMoney:"1000",createTime:"2021-12-18",updataTime:"2121-12-18"},{instanceTitle:"标题",serialNum:"001",selectUser:"选择用户",clientOrder:"20211218",handInDate:"2021-12-24",note:"请尽快发货",clientSerialNum:"C001",clientEntire:"路人甲的全称",clientName:"路人甲",clientPhone:"15896358753",clientAddress:"江苏省南京市",prepaidOrder:"20211218",deposit:"1000",depositMoney:"1000",createTime:"2021-12-18",updataTime:"2121-12-18"},{instanceTitle:"标题",serialNum:"001",selectUser:"选择用户",clientOrder:"20211218",handInDate:"2021-12-24",note:"请尽快发货",clientSerialNum:"C001",clientEntire:"路人甲的全称",clientName:"路人甲",clientPhone:"15896358753",clientAddress:"江苏省南京市",prepaidOrder:"20211218",deposit:"1000",depositMoney:"1000",createTime:"2021-12-18",updataTime:"2121-12-18"}],orderDrawer:!1,options:[{value:"0",label:"A公司"},{value:"1",label:"B公司"},{value:"2",label:"C公司"},{value:"3",label:"D公司"}],orderForm:{serialNum:"",selectUser:"",clientOrder:"",handInDate:"",note:"",prepaidOrder:"0",deposit:"",depositMoney:""},selectInputIndex:"",baseData:{id:"",aa:"",a:"--",b:"--",c:"--",d:"--",e:"--",f:"",g:"",h:"--"},goodList:[],dialogTable:!1,dialogGoodsData:[{id:"001",a:"商品A",b:"1类",c:"KJLJDSL6565",d:"11mm",e:"箱",f:199},{id:"002",a:"商品B",b:"2类",c:"HJHBK352153",d:"11cm",e:"件",f:299},{id:"003",a:"商品C",b:"3类",c:"KLASKL744",d:"10mm",e:"箱",f:99},{id:"004",a:"商品D",b:"1类",c:"SIU5445",d:"11m",e:"件",f:399}]}},mounted:function(){0===this.goodList.length&&this.addGoodsData(),k().then((function(e){if(null!=e&&200==e.code){var t=e.data;alert("corpId:"+t),N((function(e){void 0!==e&&null!==e&&""!=e?w({code:e}).then((function(e){if(b["Message"].info(e),null!=e&&200==e.code){var t=e.data;localStorage.setItem("dduserinfo",t),localStorage.setItem("dindinToken",t.token)}})):b["Message"].error("获取用户免登授权码失败!")}),t)}}))},methods:{initGetOrderList:function(){S(this.parameter).then((function(e){b["Message"].info(e)}))},initGetClientList:function(){x().then((function(e){b["Message"].info(e)}))},initGetGoodsList:function(){T().then((function(e){b["Message"].info(e)}))},addOrderClick:function(){var e=this;this.orderForm.goodlist=this.goodList,D(this.orderForm).then((function(t){b["Message"].info(t),e.orderDrawer=!1,e.goodList=[],e.$refs.form.resetFields()}))},handleSizeChange:function(e){b["Message"].info("每页 ".concat(e," 条")),this.parameter.pageNum=e,this.getOrderList()},handleCurrentChange:function(e){b["Message"].info("当前页: ".concat(e)),this.parameter.pageSize=e,this.getOrderList()},addGoodsData:function(){this.goodList.push(JSON.parse(JSON.stringify(this.baseData)))},openDialog:function(e){this.selectInputIndex=e,this.dialogTable=!0},rowClick:function(e){this.goodList[this.selectInputIndex].aa=e.a,this.goodList[this.selectInputIndex].h=0,Object.assign(this.goodList[this.selectInputIndex],e),this.dialogTable=!1},allMoney:function(e,t){null!==t&&void 0!==t&&t.f&&null!==t&&void 0!==t&&t.g?this.goodList[e].h=t.f*t.g:this.goodList[e].h=0},deleteData:function(e){var t=this;this.$confirm("此操作将永久删除当前数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.goodList.splice(e,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){}))}}},C=I,M=(r("fd9d"),Object(n["a"])(C,u,p,!1,null,"11552b4c",null)),L=M.exports;a["default"].use(d["a"]);var _=[{path:"/",name:"Home",component:L}],$=new d["a"]({routes:_}),j=$,P=(r("0fae"),r("130e"));a["default"].use(P["a"],f.a),a["default"].use(h.a),a["default"].config.productionTip=!1,new a["default"]({router:j,render:function(e){return e(c)}}).$mount("#app")},cae2:function(e,t,r){},fd9d:function(e,t,r){"use strict";r("cae2")}});
//# sourceMappingURL=app.41987493.js.map